<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="JoeModelCE">
<title>Joe Model Overview • JoeModelCE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Joe Model Overview">
<meta property="og:description" content="JoeModelCE">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">JoeModelCE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/joe-model.html">Joe Model Overview</a>
    <a class="dropdown-item" href="../articles/population-model-batch-run.html">Population Model Batch Run</a>
    <a class="dropdown-item" href="../articles/population-model.html">Population Model Overview</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="joe-model_files/kePrint-0.0.1/kePrint.js"></script><link href="joe-model_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Joe Model Overview</h1>
            
            <h4 data-toc-skip class="date">2022-09-26</h4>
      
      
      <div class="d-none name"><code>joe-model.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The following tutorial provides an overview of running the Joe Model
offline from within R. Users following this tutorial should have R,
RStudio and the R package <code>devtools</code> installed on their
machine.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>At this time the Joe Model R package is hosted on GitHub and can be
installed using devtools. Hopefully in the near future the near future
the package will be available on R-CRAN for standard installation and
loading.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="co"># install_github("essatech/JoeModelCE")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">JoeModelCE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="import-data">Import Data<a class="anchor" aria-label="anchor" href="#import-data"></a>
</h2>
<p>There are two input datasets needed to run the Joe Model The Joe
Model requires two key datasets, a stressor-response workbook and a
stressor magnitude workbook. The stressor-response workbook… and the
stressor magnitude workbook…</p>
<div class="section level3">
<h3 id="stressor-response-workbook">Stressor Response Workbook<a class="anchor" aria-label="anchor" href="#stressor-response-workbook"></a>
</h3>
<p>The stressor-response Excel workbook must follow a standardized
format. The first worksheet should be titled <code>Main</code>.</p>
<div class="section level4">
<h4 id="main-worksheet">Main Worksheet<a class="anchor" aria-label="anchor" href="#main-worksheet"></a>
</h4>
<p>TODO placeholder text</p>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Table 1: ‘Main’ worksheet sample from stressor-response.xlsx workbook
</caption>
<thead><tr>
<th style="text-align:left;">
Stressors
</th>
<th style="text-align:left;">
Stressor_cat
</th>
<th style="text-align:left;">
Interaction
</th>
<th style="text-align:left;">
Linked
</th>
<th style="text-align:left;">
Stress_Scale
</th>
<th style="text-align:left;">
Function
</th>
<th style="text-align:left;">
Life_stages
</th>
<th style="text-align:left;">
Parameters
</th>
<th style="text-align:left;">
Units
</th>
<th style="text-align:left;">
Model
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Aug_flow
</td>
<td style="text-align:left;">
Aug_flow
</td>
<td style="text-align:left;">
Minimum
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
linear
</td>
<td style="text-align:left;">
continuous
</td>
<td style="text-align:left;">
adult
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Joe Model
</td>
</tr>
<tr>
<td style="text-align:left;">
Barrier_dams
</td>
<td style="text-align:left;">
Barrier_dams
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
linear
</td>
<td style="text-align:left;">
step
</td>
<td style="text-align:left;">
adult
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Joe Model
</td>
</tr>
<tr>
<td style="text-align:left;">
BKTR
</td>
<td style="text-align:left;">
BKTR
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
linear
</td>
<td style="text-align:left;">
continuous
</td>
<td style="text-align:left;">
adult
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Joe Model
</td>
</tr>
<tr>
<td style="text-align:left;">
Feb_flow
</td>
<td style="text-align:left;">
Feb_flow
</td>
<td style="text-align:left;">
Minimum
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
linear
</td>
<td style="text-align:left;">
continuous
</td>
<td style="text-align:left;">
adult
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Joe Model
</td>
</tr>
<tr>
<td style="text-align:left;">
Foot_flow
</td>
<td style="text-align:left;">
Foot_flow
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
linear
</td>
<td style="text-align:left;">
continuous
</td>
<td style="text-align:left;">
adult
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Joe Model
</td>
</tr>
</tbody>
</table>
<p>TODO describe the columns in the workbook</p>
<ol style="list-style-type: decimal">
<li>
<strong>Stressors</strong> Name of the stressor…</li>
<li>
<strong>Stressor_cat</strong> Name of the stressor category (only
relevant to population model)…</li>
<li>
<strong>Interaction</strong> Can be either blank or NA with the
default of multiplicative, ‘Additive’ or ‘Minimum’…</li>
<li>
<strong>Linked</strong> For variables with minimum interaction…</li>
<li>
<strong>Stress_Scale</strong> Can be either <code>'linear'</code> or
<code>'logarithmic'</code>…</li>
<li>
<strong>Function</strong> Can be either <code>'continuious'</code>
or <code>'step'</code>…</li>
<li>
<strong>Life_stages</strong> Can be either <code>'fry_parr'</code>,
<code>'alevin'</code>, <code>'sub_adult'</code> or
<code>'adult'</code>,…</li>
<li>
<strong>Parameters</strong> Can be blank or NA (default), which
implys the relationship is for system capacity or linked to a vital rate
<code>'survival'</code>, <code>'capacity'</code>…</li>
</ol>
</div>
<div class="section level4">
<h4 id="stressor-dose-response-worksheets">Stressor Dose-Response Worksheets<a class="anchor" aria-label="anchor" href="#stressor-dose-response-worksheets"></a>
</h4>
<p>TODO placeholder text</p>
<p>After the stressor response Excel workbook then must have individual
worksheets for each of the stressors after the <code>Main</code> sheet.
Please ensure that the spelling is identical between the
<code>Stressors</code> column in the <code>Main</code> sheet and the
work sheet name for each stressor.</p>
<p>Each doese response curve is provided on a seperate worksheet. The
example below shows the dose-response curve of water temperature (C) and
the Adult system capacity.</p>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Table 2: Example ‘Temperature’ dose-response curve data for temperature
(x-axis) and system capacity (y-axis)
</caption>
<thead><tr>
<th style="text-align:right;">
Temperature
</th>
<th style="text-align:right;">
Mean System Capacity (%)
</th>
<th style="text-align:right;">
SD
</th>
<th style="text-align:right;">
low.limit
</th>
<th style="text-align:right;">
up.limit
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
80
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
95
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
30
</td>
</tr>
<tr>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p>TODO describe the columns in the workbook</p>
<ol style="list-style-type: decimal">
<li>
<strong>Temperature</strong> The first column should be the name of
the stressor…</li>
<li>
<strong>Mean System Capacity (%)</strong> The next column is the
mean system capacity (from 0 - 100)..</li>
<li>
<strong>SD</strong> The third column is the standard deviation for
the mean system capacity. This is useful to represent uncertianty in the
relationship. For example, a temperature of 12C will not always equate
to a system capacity of exactly 90%…</li>
<li>
<strong>low.limit</strong> Lower limits for the cumulative system
capacity…</li>
<li>
<strong>up.limit</strong> Upper limits for the cumulative system
capacity…</li>
</ol>
<div class="figure" style="text-align: center">
<img src="joe-model_files/figure-html/dr_sample-1.png" alt="Example Stressor-Response Curve" width="576"><p class="caption">
Example Stressor-Response Curve
</p>
</div>
<p>The figure above shows a stressor response curve. The raw values of
the stressor are plotted on the x-axis and the mean system capacity is
showen on the y-axis. For each stressor and each simulation values for
the mean system capacity will be drawn from a normal distribution with a
mean and standard deviation (error bars) bound by the lower and upper
limits (grey shading).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Load default file from Joe Model Package</span></span>
<span>  <span class="va">filename_sr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"stressor_response_fixed_ARTR.xlsx"</span>, package <span class="op">=</span> <span class="st">"JoeModelCE"</span><span class="op">)</span></span>
<span>  <span class="co"># Use the StressorResponseWorkbook() function from the JoeModelCE package to format the data and check for errors and issues</span></span>
<span>  <span class="va">sr_wb_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StressorResponseWorkbook.html">StressorResponseWorkbook</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">filename_sr</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">sr_wb_dat</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "main_sheet"     "stressor_names" "pretty_names"   "sr_dat"        </span></span>
<span><span class="co">#&gt; [5] "MInt"</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="stressor-magnitude-workbook">Stressor Magnitude Workbook<a class="anchor" aria-label="anchor" href="#stressor-magnitude-workbook"></a>
</h3>
<p>Shows the actual values for each location of interest…</p>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Table 3: Location data from stressor-magnitude.xlsx workbook
</caption>
<thead><tr>
<th style="text-align:right;">
HUC_ID
</th>
<th style="text-align:left;">
NAME
</th>
<th style="text-align:left;">
Stressor
</th>
<th style="text-align:left;">
Stressor_cat
</th>
<th style="text-align:right;">
Mean
</th>
<th style="text-align:right;">
SD
</th>
<th style="text-align:left;">
Distribution
</th>
<th style="text-align:right;">
Low_Limit
</th>
<th style="text-align:right;">
Up_Limit
</th>
<th style="text-align:left;">
Comments
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1702010107
</td>
<td style="text-align:left;">
Name…
</td>
<td style="text-align:left;">
Aug_flow
</td>
<td style="text-align:left;">
Aug_flow
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
normal
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
1702010107
</td>
<td style="text-align:left;">
Name…
</td>
<td style="text-align:left;">
Barrier_dams
</td>
<td style="text-align:left;">
Barrier_dams
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
normal
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
1702010107
</td>
<td style="text-align:left;">
Name…
</td>
<td style="text-align:left;">
BKTR
</td>
<td style="text-align:left;">
BKTR
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
normal
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
1702010107
</td>
<td style="text-align:left;">
Name…
</td>
<td style="text-align:left;">
Feb_flow
</td>
<td style="text-align:left;">
Feb_flow
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
normal
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p>Column names should be as follows:</p>
<ol style="list-style-type: decimal">
<li>
<strong>HUC_ID</strong> Unique (numeric) identifer for a location of
interest. Formally from Hydrologial Unit Code (HUC) representing unique
subbasins, but can be anything…</li>
<li>
<strong>NAME</strong> Name (character) of a given location. Note
that this column is used for display purposes only…</li>
<li>
<strong>Stressor</strong> Name of the stressor. Note that this mutch
match the spelling used in the stressor response workbook…</li>
<li>
<strong>Stressor_cat</strong> Name of the Stressor ctegory. Note
that this mutch match the spelling used in the stressor response
workbook…</li>
<li>
<strong>Mean</strong> Mean value for the specific location…</li>
<li>
<strong>SD</strong> Standard deviation for the specific stressor for
that location. The value of each stressor and combination will be
resampled for each simulation…</li>
<li>
<strong>Distribution</strong> Resampling distribution either
<code>'lognormal'</code> or <code>'normal'</code>…</li>
<li>
<strong>Low_Limit</strong> Lower limits for the locaiton-speific
stressor…</li>
<li>
<strong>Up_Limit</strong> Upper limits for the locaiton-speific
stressor….</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># Load default file from Joe Model Package</span></span>
<span>  <span class="va">filename_rm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"stressor_magnitude_unc_ARTR.xlsx"</span>, package <span class="op">=</span> <span class="st">"JoeModelCE"</span><span class="op">)</span></span>
<span>  <span class="co"># Use the StressorMagnitudeWorkbook() function from the JoeModelCE package to format the data and check for errors and issues</span></span>
<span>  <span class="va">smw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StressorMagnitudeWorkbook.html">StressorMagnitudeWorkbook</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">filename_rm</span>, scenario_worksheet <span class="op">=</span> <span class="st">"natural_unc"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">smw</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "HUC_ID"       "NAME"         "Stressor"     "Stressor_cat" "Mean"        </span></span>
<span><span class="co">#&gt;  [6] "SD"           "Distribution" "Low_Limit"    "Up_Limit"     "Comments"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="cumulative-system-capacity">Cumulative System Capacity<a class="anchor" aria-label="anchor" href="#cumulative-system-capacity"></a>
</h2>
<p>TODO placeholder text … Run the cumulative system capacity for a
single watershed</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Stressor Response Workbook object = sr_wb_dat</span></span>
<span></span>
<span><span class="co"># Run the mean_Response() function to create response curves.</span></span>
<span><span class="co"># Note that this intermediate object is need throughout</span></span>
<span><span class="va">mean.resp.list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mean_Response.html">mean_Response</a></span><span class="op">(</span></span>
<span>  n.stressors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">main_sheet</span><span class="op">)</span>,</span>
<span>  str.list <span class="op">=</span> <span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">sr_dat</span>,</span>
<span>  main <span class="op">=</span> <span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">main_sheet</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set up objects for system capacity function - for "Temperature_adult"</span></span>
<span><span class="va">f.main.df</span> <span class="op">&lt;-</span> <span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">main_sheet</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">main_sheet</span><span class="op">$</span><span class="va">Stressors</span> <span class="op">==</span> <span class="st">"Temperature_adult"</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">f.stressor.df</span> <span class="op">&lt;-</span> <span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">sr_dat</span><span class="op">[[</span><span class="st">"Temperature_adult"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">f.mean.resp.list</span> <span class="op">&lt;-</span> <span class="va">mean.resp.list</span><span class="op">[[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">sr_wb_dat</span><span class="op">$</span><span class="va">main_sheet</span><span class="op">$</span><span class="va">Stressors</span> <span class="op">==</span> <span class="st">"Temperature_adult"</span><span class="op">)</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Stressor Magnitude: Make up fake data for a sample watershed (e.g., HUC_ID: 1701010208)</span></span>
<span><span class="va">smw_sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>HUC_ID <span class="op">=</span> <span class="fl">0</span>, NAME <span class="op">=</span> <span class="st">"Location Name"</span>,</span>
<span>                      Stressor <span class="op">=</span> <span class="st">"Temperature_adult"</span>, Stressor_cat <span class="op">=</span> <span class="st">"Temperature"</span>,</span>
<span>                      Mean <span class="op">=</span> <span class="fl">14</span>, SD <span class="op">=</span> <span class="fl">3</span>, Distribution <span class="op">=</span> <span class="st">"normal"</span>,</span>
<span>                      Low_Limit <span class="op">=</span> <span class="fl">4</span>, Up_Limit <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ?SystemCapacity # Preview help function</span></span>
<span></span>
<span><span class="va">test_sc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SystemCapacity.html">SystemCapacity</a></span><span class="op">(</span>f.dose.df <span class="op">=</span> <span class="va">smw_sample</span>,</span>
<span>                          f.main.df <span class="op">=</span> <span class="va">f.main.df</span>,</span>
<span>                          f.stressor.df <span class="op">=</span> <span class="va">f.stressor.df</span>,</span>
<span>                          f.mean.resp.list <span class="op">=</span> <span class="va">f.mean.resp.list</span>,</span>
<span>                          n.sims <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">test_sc</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "sys.cap"  "dose"     "dose.mat"</span></span>
<span></span>
<span><span class="co"># Look at system capacity for one variable and one stressor</span></span>
<span><span class="va">sys_cap</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">test_sc</span><span class="op">$</span><span class="va">sys.cap</span> <span class="op">*</span> <span class="fl">100</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">sys_cap</span>, xlab <span class="op">=</span> <span class="st">"Mean System Capacity (%)"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="joe-model_files/figure-html/tmsc_plot-1.png" alt="Mean System Capacity for temperature for a hypothetical watershed" width="576"><p class="caption">
Mean System Capacity for temperature for a hypothetical watershed
</p>
</div>
</div>
<div class="section level2">
<h2 id="joe-model">Joe Model<a class="anchor" aria-label="anchor" href="#joe-model"></a>
</h2>
<p>TODO placeholder text What about all variables and all stressors -
run the full Joe Model…</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Import of stressor response and magnitude workbook</span></span>
<span><span class="va">filename_rm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"stressor_magnitude_unc_ARTR.xlsx"</span>, package <span class="op">=</span> <span class="st">"JoeModelCE"</span><span class="op">)</span></span>
<span><span class="va">filename_sr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"stressor_response_fixed_ARTR.xlsx"</span>, package <span class="op">=</span> <span class="st">"JoeModelCE"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dose</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StressorMagnitudeWorkbook.html">StressorMagnitudeWorkbook</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">filename_rm</span>, scenario_worksheet <span class="op">=</span> <span class="st">"natural_unc"</span><span class="op">)</span></span>
<span><span class="va">sr_wb_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/StressorResponseWorkbook.html">StressorResponseWorkbook</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">filename_sr</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ----------------------------------------------------------</span></span>
<span><span class="co"># Run the Basic Joe Model</span></span>
<span><span class="va">jmr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/JoeModel_Run.html">JoeModel_Run</a></span><span class="op">(</span>dose <span class="op">=</span> <span class="va">dose</span>, <span class="co"># Stressor Magnitude Object</span></span>
<span>                    sr_wb_dat <span class="op">=</span> <span class="va">sr_wb_dat</span>, <span class="co"># Stressor Response Object</span></span>
<span>                    MC_sims <span class="op">=</span> <span class="fl">10</span> <span class="co"># Number of Monte Carlo simulations</span></span>
<span>                    <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">jmr</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ce.df"      "sc.dose.df"</span></span>
<span><span class="co"># ce.df = Mean system capacity for each HUC_ID for each simulation</span></span>
<span><span class="co"># sc.dose.df = Mean system capacity for each variable for each HUC_ID for each simulation</span></span>
<span><span class="va">msc</span> <span class="op">&lt;-</span> <span class="va">jmr</span><span class="op">$</span><span class="va">ce.df</span><span class="op">$</span><span class="va">CE</span> <span class="op">*</span> <span class="fl">100</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">msc</span>, xlab <span class="op">=</span> <span class="st">"Mean System Capacity (%)"</span>, main <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="joe-model_files/figure-html/msc_plot-1.png" alt="Mean System Capacity for all stressors and all watersheds across all simulations" width="576"><p class="caption">
Mean System Capacity for all stressors and all watersheds across all
simulations
</p>
</div>
<div class="section level3">
<h3 id="components">Components<a class="anchor" aria-label="anchor" href="#components"></a>
</h3>
<p>TODO placeholder text</p>
<div class="section level4">
<h4 id="cumulative-effects-dataframe">Cumulative Effects Dataframe<a class="anchor" aria-label="anchor" href="#cumulative-effects-dataframe"></a>
</h4>
<p>TODO placeholder text</p>
</div>
<div class="section level4">
<h4 id="system-capacity-dose-response-dataframe">System Capacity Dose-Response Dataframe<a class="anchor" aria-label="anchor" href="#system-capacity-dose-response-dataframe"></a>
</h4>
<p>TODO placeholder text</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Matthew Bayly.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
