<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="JoeModelCE">
<title>5. BC CEF Data Import â€¢ JoeModelCE</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="5. BC CEF Data Import">
<meta property="og:description" content="JoeModelCE">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">JoeModelCE</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/a01-joe-model.html">1. Joe Model Overview</a>
    <a class="dropdown-item" href="../articles/a02-joe-model-batch-run.html">2. Joe Model Batch Run</a>
    <a class="dropdown-item" href="../articles/a03-population-model.html">3. Population Model Overview</a>
    <a class="dropdown-item" href="../articles/a04-population-model-batch-run.html">4. Population Model Batch Run</a>
    <a class="dropdown-item" href="../articles/a05-bc-cef.html">5. BC CEF Data Import</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>5. BC CEF Data Import</h1>
            
            <h4 data-toc-skip class="date">2023-09-25</h4>
      
      
      <div class="d-none name"><code>a05-bc-cef.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="import-data-from-the-bc-cef-assessment-units">Import data from the BC-CEF Assessment Units<a class="anchor" aria-label="anchor" href="#import-data-from-the-bc-cef-assessment-units"></a>
</h2>
<p>This example was developed to transform data outputs from the BC
Provincial Cumulative Effects Framework into a stressor-magnitude and
stressor-response file that can be readily imported into the Joe Model.
The BCCEF is centered around risk and hazard potential for assessment
units with readily available GIS metrics such as road density, total
landcover alternation and various natural vulnerability indicators. By
integrating the BCCEF with the Joe Model, we can adjust the risk level
benchmarks as stressor-response curves to modify assumptions for
variables of interest.</p>
<p>BC CEF: Cumulative Effects Framework <a href="https://www2.gov.bc.ca/gov/content/environment/natural-resource-stewardship/cumulative-effects-framework" class="external-link uri">https://www2.gov.bc.ca/gov/content/environment/natural-resource-stewardship/cumulative-effects-framework</a></p>
<p>BC CEF: Data Portal (download data here) <a href="https://experience.arcgis.com/experience/3aed6c004103495c85252051931a1b29/" class="external-link uri">https://experience.arcgis.com/experience/3aed6c004103495c85252051931a1b29/</a></p>
<p>To begin navigate to the BC CEF and area of interest. Launch the ERSI
application and download the data for an area of interest. The
downloaded file should be available as a gdb (file geodatabase). The
following blocks of code will convert the data into a format compatible
with the Joe Model.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install the JoeModelCE (first-time users)</span></span>
<span><span class="co"># devtools::install_github("essatech/JoeModelCE")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://essatech.github.io/JoeModelCE/" class="external-link">JoeModelCE</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use the sf library and dplyr</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Update the path to your geodatabase file</span></span>
<span><span class="va">path_to_gdb</span> <span class="op">&lt;-</span> <span class="st">"C:/Users/mattj/Downloads/NicolaWSs.gdb"</span></span>
<span><span class="co"># Load the data</span></span>
<span><span class="va">bccef</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="va">path_to_gdb</span>, layer <span class="op">=</span> <span class="st">"NicolaWSs"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ensure this looks right for your areas of interest</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Review the attribute</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="isolate-target-variables-of-interest">Isolate target variables of interest<a class="anchor" aria-label="anchor" href="#isolate-target-variables-of-interest"></a>
</h2>
<p>The BC CEF dataset contains numerous indicators, vulnerability
metrics, precursor variables and informational attributes. Itâ€™s best to
isolate a target list of meaningful stressor magnitude variables (or
proxies) that you will bring forward into the Joe Model as
stressors.</p>
<p>In this example we will isolate our assessment to the following
variables from the BC CEF framework for aquatic ecosystems:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Ensure this looks right for your areas of interest</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Review the attribute</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Remove any duplicate ID object</span></span>
<span><span class="va">bccef</span> <span class="op">&lt;-</span> <span class="va">bccef</span><span class="op">[</span><span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">ASSESS_UNI_NUM</span><span class="op">)</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">bccef</span> <span class="op">&lt;-</span> <span class="va">bccef</span><span class="op">[</span><span class="op">!</span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">ASSESS_UNI_NAME</span> <span class="op">==</span> <span class="st">"Nicola Watershed"</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">bccef</span> <span class="op">&lt;-</span> <span class="va">bccef</span><span class="op">[</span><span class="va">bccef</span><span class="op">$</span><span class="va">AU_AREA_HA</span> <span class="op">&lt;</span> <span class="fl">30000</span>, <span class="op">]</span></span>
<span></span>
<span></span>
<span><span class="co"># Need to cut smaller polygons out of larger polygons</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ECA_PERCENT</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">ECA_PERCENT</span><span class="op">)</span></span>
<span></span>
<span><span class="va">var1</span> <span class="op">&lt;-</span> <span class="fu">conversion_bc_cef</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bccef</span>,</span>
<span>  Stressor <span class="op">=</span> <span class="st">"ECA_PERCENT"</span>,</span>
<span>  Function <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  Units <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  Low_Limit <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  Up_Limit <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  value_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  msc_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">90</span>, <span class="fl">80</span>, <span class="fl">60</span>, <span class="fl">40</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">RUNOFF_GEN_POT_SUM</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">RUNOFF_GEN_POT_SUM</span> <span class="op">~</span> <span class="va">bccef</span><span class="op">$</span><span class="va">RUNOFF_GEN_POT_RATING</span><span class="op">)</span></span>
<span><span class="va">var2</span> <span class="op">&lt;-</span> <span class="fu">conversion_bc_cef</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bccef</span>,</span>
<span>  Stressor <span class="op">=</span> <span class="st">"RUNOFF_GEN_POT_SUM"</span>,</span>
<span>  Function <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  Units <span class="op">=</span> <span class="st">""</span>,</span>
<span>  Low_Limit <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  Up_Limit <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  value_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">5</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  msc_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">50</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">var2</span><span class="op">$</span><span class="va">stressor_response</span><span class="op">$</span><span class="va">sr_data</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">RUNOFF_ATTENUATION_SUM</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">RUNOFF_ATTENUATION_SUM</span> <span class="op">~</span> <span class="va">bccef</span><span class="op">$</span><span class="va">RUNOFF_ATTENUATION_RATING</span><span class="op">)</span></span>
<span><span class="va">var3</span> <span class="op">&lt;-</span> <span class="fu">conversion_bc_cef</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bccef</span>,</span>
<span>  Stressor <span class="op">=</span> <span class="st">"RUNOFF_ATTENUATION_SUM"</span>,</span>
<span>  Function <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  Units <span class="op">=</span> <span class="st">""</span>,</span>
<span>  Low_Limit <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  Up_Limit <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  value_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  msc_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">60</span>, <span class="fl">80</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">var3</span><span class="op">$</span><span class="va">stressor_response</span><span class="op">$</span><span class="va">sr_data</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">HYDROLOGIC_RESP_POT_SUM</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">HYDROLOGIC_RESP_POT_SUM</span> <span class="op">~</span> <span class="va">bccef</span><span class="op">$</span><span class="va">HYDROLOGIC_RESP_POT_RATING</span><span class="op">)</span></span>
<span><span class="va">var4</span> <span class="op">&lt;-</span> <span class="fu">conversion_bc_cef</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bccef</span>,</span>
<span>  Stressor <span class="op">=</span> <span class="st">"HYDROLOGIC_RESP_POT_SUM"</span>,</span>
<span>  Function <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  Units <span class="op">=</span> <span class="st">""</span>,</span>
<span>  Low_Limit <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  Up_Limit <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  value_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">8</span>, <span class="fl">7</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  msc_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">60</span>, <span class="fl">80</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">var4</span><span class="op">$</span><span class="va">stressor_response</span><span class="op">$</span><span class="va">sr_data</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">STREAMFLOW_HAZARD_SUM</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">STREAMFLOW_HAZARD_SUM</span> <span class="op">~</span> <span class="va">bccef</span><span class="op">$</span><span class="va">STREAMFLOW_HAZARD_RATING</span><span class="op">)</span></span>
<span><span class="va">var5</span> <span class="op">&lt;-</span> <span class="fu">conversion_bc_cef</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bccef</span>,</span>
<span>  Stressor <span class="op">=</span> <span class="st">"STREAMFLOW_HAZARD_SUM"</span>,</span>
<span>  Function <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  Units <span class="op">=</span> <span class="st">""</span>,</span>
<span>  Low_Limit <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  Up_Limit <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  value_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">5</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  msc_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">40</span>, <span class="fl">60</span>, <span class="fl">80</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">var5</span><span class="op">$</span><span class="va">stressor_response</span><span class="op">$</span><span class="va">sr_data</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">SEDIMENT_GEN_DELIV_POT_SUM</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">SEDIMENT_GEN_DELIV_POT_SUM</span> <span class="op">~</span> <span class="va">bccef</span><span class="op">$</span><span class="va">SEDIMENT_GEN_DELIV_POT_RATING</span><span class="op">)</span></span>
<span><span class="va">var6</span> <span class="op">&lt;-</span> <span class="fu">conversion_bc_cef</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bccef</span>,</span>
<span>  Stressor <span class="op">=</span> <span class="st">"SEDIMENT_GEN_DELIV_POT_SUM"</span>,</span>
<span>  Function <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  Units <span class="op">=</span> <span class="st">""</span>,</span>
<span>  Low_Limit <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  Up_Limit <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  value_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">8</span>, <span class="fl">7</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  msc_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">60</span>, <span class="fl">80</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">var6</span><span class="op">$</span><span class="va">stressor_response</span><span class="op">$</span><span class="va">sr_data</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">SEDIMENT_HAZARD_RATING</span><span class="op">)</span></span>
<span><span class="va">bccef</span><span class="op">$</span><span class="va">shr</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">bccef</span><span class="op">$</span><span class="va">shr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">SEDIMENT_HAZARD_RATING</span> <span class="op">==</span> <span class="st">"H"</span>, <span class="fl">4</span>, <span class="va">bccef</span><span class="op">$</span><span class="va">shr</span><span class="op">)</span></span>
<span><span class="va">bccef</span><span class="op">$</span><span class="va">shr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">SEDIMENT_HAZARD_RATING</span> <span class="op">==</span> <span class="st">"M"</span>, <span class="fl">3</span>, <span class="va">bccef</span><span class="op">$</span><span class="va">shr</span><span class="op">)</span></span>
<span><span class="va">bccef</span><span class="op">$</span><span class="va">shr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">SEDIMENT_HAZARD_RATING</span> <span class="op">==</span> <span class="st">"L"</span>, <span class="fl">2</span>, <span class="va">bccef</span><span class="op">$</span><span class="va">shr</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">shr</span> <span class="op">~</span> <span class="va">bccef</span><span class="op">$</span><span class="va">SEDIMENT_HAZARD_RATING</span><span class="op">)</span></span>
<span><span class="va">bccef</span><span class="op">$</span><span class="va">SEDIMENT_HAZARD_RATING</span> <span class="op">&lt;-</span> <span class="va">bccef</span><span class="op">$</span><span class="va">shr</span></span>
<span><span class="va">var7</span> <span class="op">&lt;-</span> <span class="fu">conversion_bc_cef</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bccef</span>,</span>
<span>  Stressor <span class="op">=</span> <span class="st">"SEDIMENT_HAZARD_RATING"</span>,</span>
<span>  Function <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  Units <span class="op">=</span> <span class="st">""</span>,</span>
<span>  Low_Limit <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  Up_Limit <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  value_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  msc_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">60</span>, <span class="fl">80</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">var7</span><span class="op">$</span><span class="va">stressor_response</span><span class="op">$</span><span class="va">sr_data</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">RIPARIAN_LANDUSE_SUM</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html" class="external-link">boxplot</a></span><span class="op">(</span><span class="va">bccef</span><span class="op">$</span><span class="va">RIPARIAN_LANDUSE_SUM</span> <span class="op">~</span> <span class="va">bccef</span><span class="op">$</span><span class="va">RIPARIAN_HAZARD_RATING</span><span class="op">)</span></span>
<span><span class="va">var8</span> <span class="op">&lt;-</span> <span class="fu">conversion_bc_cef</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">bccef</span>,</span>
<span>  Stressor <span class="op">=</span> <span class="st">"RIPARIAN_LANDUSE_SUM"</span>,</span>
<span>  Function <span class="op">=</span> <span class="st">"continuous"</span>,</span>
<span>  Units <span class="op">=</span> <span class="st">""</span>,</span>
<span>  Low_Limit <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  Up_Limit <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  value_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>  msc_vector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">40</span>, <span class="fl">60</span>, <span class="fl">80</span>, <span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">var8</span><span class="op">$</span><span class="va">stressor_response</span><span class="op">$</span><span class="va">sr_data</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="compile-objects-together-and-export-files">Compile objects together and export files<a class="anchor" aria-label="anchor" href="#compile-objects-together-and-export-files"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">var1</span>, <span class="va">var2</span>, <span class="va">var3</span>, </span>
<span>            <span class="va">var4</span>, <span class="va">var5</span>, <span class="va">var6</span>,</span>
<span>            <span class="va">var7</span>, <span class="va">var8</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sm_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">sr_main</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">sr_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">sheet_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">all</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">this_set</span> <span class="op">&lt;-</span> <span class="va">all</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">sm_dat</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">this_set</span><span class="op">$</span><span class="va">stressor_magnitude</span></span>
<span>  <span class="va">sr_main</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">this_set</span><span class="op">$</span><span class="va">stressor_response</span><span class="op">$</span><span class="va">sr_main</span></span>
<span>  <span class="va">sr_dat</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">this_set</span><span class="op">$</span><span class="va">stressor_response</span><span class="op">$</span><span class="va">sr_data</span></span>
<span>  <span class="va">sheet_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sheet_names</span>, <span class="va">this_set</span><span class="op">$</span><span class="va">stressor_response</span><span class="op">$</span><span class="va">sr_name</span><span class="op">)</span></span>
<span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">sm_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="st">"rbind"</span>, <span class="va">sm_dat</span><span class="op">)</span></span>
<span><span class="va">sr_main</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="st">"rbind"</span>, <span class="va">sr_main</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sr_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">sr_main</span><span class="op">)</span>, <span class="va">sr_dat</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">sr_out</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Main"</span>, <span class="va">sheet_names</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">writexl</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/writexl/reference/write_xlsx.html" class="external-link">write_xlsx</a></span><span class="op">(</span><span class="va">sm_dat</span>, path <span class="op">=</span> <span class="st">"stressor_magnitude.xlsx"</span><span class="op">)</span></span>
<span><span class="fu">writexl</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/writexl/reference/write_xlsx.html" class="external-link">write_xlsx</a></span><span class="op">(</span><span class="va">sr_out</span>, path <span class="op">=</span> <span class="st">"stressor_response.xlsx"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Export geometry</span></span>
<span><span class="va">bccef_geom</span> <span class="op">&lt;-</span> <span class="va">bccef</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ASSESS_UNI_NUM"</span>, <span class="st">"ASSESS_UNI_NAME"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">bccef_geom</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HUC_ID"</span>, <span class="st">"NAME"</span>, <span class="st">"Shape"</span><span class="op">)</span></span>
<span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_write.html" class="external-link">st_write</a></span><span class="op">(</span><span class="va">bccef_geom</span>, dsn <span class="op">=</span> <span class="st">"watersheds.gpkg"</span>, delete_dsn <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Matthew Bayly.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
